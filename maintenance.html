<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintenance Guide - Proxmox Media Server</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #e57000; --secondary: #1a1a2e; --text: #333; --bg: #f4f4f4; --card: #fff; --success: #28a745; --warning: #ffc107; --danger: #dc3545; --info: #17a2b8; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.7; color: var(--text); background: var(--bg); }
        nav { background: var(--secondary); padding: 1rem; }
        nav .container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; }
        nav a { color: white; text-decoration: none; font-weight: 600; }
        header { background: linear-gradient(135deg, var(--secondary), #16213e); color: white; padding: 4rem 1rem; text-align: center; }
        header h1 { font-size: 2.5rem; }
        .container { max-width: 1000px; margin: 0 auto; padding: 2rem; }
        section { background: var(--card); border-radius: 12px; padding: 2rem; margin: 2rem 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid var(--primary); }
        h2 { color: var(--secondary); border-bottom: 3px solid var(--primary); padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        h3 { color: var(--secondary); margin: 2rem 0 1rem; }
        pre { background: #1a1a2e; color: #fff; padding: 1.5rem; border-radius: 8px; overflow-x: auto; font-family: monospace; margin: 1rem 0; border-left: 4px solid var(--primary); }
        code { background: #e8e8e8; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: monospace; }
        table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; }
        th, td { padding: 1rem; border: 1px solid #ddd; text-align: left; }
        th { background: var(--secondary); color: white; }
        td code { background: #1a1a2e; color: #00ff88; }
        ul, ol { margin: 1rem 0 1rem 1.5rem; }
        li { margin-bottom: 0.5rem; }
        .note, .warning, .danger, .success { border-left: 4px solid; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
        .note { background: #e8f4fd; border-color: #17a2b8; }
        .warning { background: #fff3cd; border-color: #ffc107; }
        .danger { background: #f8d7da; border-color: #dc3545; }
        .success { background: #d4edda; border-color: #28a745; }
        footer { background: var(--secondary); color: white; padding: 2rem; text-align: center; margin-top: 4rem; }
        footer a { color: var(--primary); }

        /* MOBILE STYLES */
        @media (max-width: 768px) {
            header { padding: 2.5rem 1rem; }
            header h1 { font-size: 1.75rem; }
            nav .container { flex-direction: column; gap: 0.5rem; text-align: center; }
            .container { padding: 1rem; }
            section { padding: 1.5rem; margin: 1.5rem 0; }
            h2 { font-size: 1.4rem; }
            h3 { font-size: 1.1rem; }
            pre { padding: 1rem; font-size: 0.8rem; overflow-x: auto; -webkit-overflow-scrolling: touch; }
            code { font-size: 0.85rem; word-break: break-word; }
            table { display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; white-space: nowrap; }
            th, td { padding: 0.75rem; font-size: 0.9rem; }
            .note, .warning, .danger, .success { padding: 0.75rem; }
        }
        a { -webkit-tap-highlight-color: transparent; }
        @supports (padding: max(0px)) {
            .container { padding-left: max(1rem, env(safe-area-inset-left)); padding-right: max(1rem, env(safe-area-inset-right)); }
        }
    </style>
</head>
<body>
    <nav><div class="container"><a href="index.html">üè† Docs Hub</a><div><a href="index.html">Home</a> | <a href="architecture.html">Architecture</a></div></div></nav>
    <header><h1>üîß Maintenance Guide</h1><p>Fix issues, reinstall apps, and recover from failures</p></header>

    <div class="container">
        <section>
            <h2>1. Quick Reference Commands</h2>
            <pre># Docker Stack
cd /opt/media-stack && docker compose up -d
docker compose ps
docker compose logs -f

# LXC Container
pct status 100
pct stop 100 && pct start 100
pct exec 100 -- bash

# Storage
zfs list
zpool status tank
smbclient -L 192.168.86.30 -U mediauser</pre>
        </section>

        <section>
            <h2>2. Verification Checklist</h2>
            <table>
                <tr><th>Step</th><th>Command</th><th>Expected</th></tr>
                <tr><td>Proxmox running</td><td><code>systemctl status pvedaemon</code></td><td>Active</td></tr>
                <tr><td>Container running</td><td><code>pct status 100</code></td><td>running</td></tr>
                <tr><td>Jellyfin accessible</td><td><code>curl http://192.168.86.46:8096</code></td><td>HTML</td></tr>
                <tr><td>SAMBA working</td><td><code>smbclient -L 192.168.86.30 -U mediauser</code></td><td>Shares</td></tr>
            </table>
        </section>

        <section>
            <h2>3. Common Fixes</h2>
            <h3>Container won't start</h3>
            <pre>journalctl -u pve-container@100
pct stop 100 && pct start 100 --debug
zpool status tank</pre>

            <h3>Jellyfin won't load</h3>
            <pre>docker compose logs jellyfin | tail -50
docker compose down
chown -R 1000:1000 config/jellyfin
docker compose up -d</pre>

            <h3>SAMBA inaccessible</h3>
            <pre>systemctl restart smbd
testparm
smbpasswd -a mediauser</pre>
        </section>

        <section>
            <h2>4. Service Locations</h2>
            <table>
                <tr><th>Service</th><th>URL</th><th>Location</th></tr>
                <tr><td>Proxmox</td><td><code>192.168.86.30:8006</code></td><td>Host</td></tr>
                <tr><td>Cockpit</td><td><code>192.168.86.30:9090</code></td><td>Host</td></tr>
                <tr><td>Jellyfin</td><td><code>192.168.86.46:8096</code></td><td>LXC</td></tr>
                <tr><td>Sonarr</td><td><code>192.168.86.30:8989</code></td><td>Host</td></tr>
                <tr><td>qBittorrent</td><td><code>192.168.86.46:8080</code></td><td>LXC</td></tr>
                <tr><td>SAMBA</td><td><code>\\192.168.86.30\media</code></td><td>Host</td></tr>
            </table>
        </section>
    </div>

    <footer><p><a href="index.html">‚Üê Back to Docs Hub</a></p></footer>
</body>
</html>
