<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Guide - Proxmox Media Server</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #e57000; --secondary: #1a1a2e; --text: #333; --bg: #f4f4f4; --card: #fff; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.7; color: var(--text); background: var(--bg); }
        nav { background: var(--secondary); padding: 1rem; }
        nav .container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; }
        nav a { color: white; text-decoration: none; font-weight: 600; }
        header { background: linear-gradient(135deg, var(--secondary), #16213e); color: white; padding: 4rem 1rem; text-align: center; }
        header h1 { font-size: 2.5rem; }
        .container { max-width: 1000px; margin: 0 auto; padding: 2rem; }
        section { background: var(--card); border-radius: 12px; padding: 2rem; margin: 2rem 0; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid var(--primary); }
        h2 { color: var(--secondary); border-bottom: 3px solid var(--primary); padding-bottom: 0.5rem; margin-bottom: 1.5rem; }
        h3 { color: var(--secondary); margin: 2rem 0 1rem; }
        pre { background: #1a1a2e; color: #fff; padding: 1.5rem; border-radius: 8px; overflow-x: auto; font-family: monospace; margin: 1rem 0; border-left: 4px solid var(--primary); }
        code { background: #e8e8e8; padding: 0.2rem 0.4rem; border-radius: 4px; font-family: monospace; }
        table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
        th, td { padding: 1rem; border: 1px solid #ddd; text-align: left; }
        th { background: var(--secondary); color: white; }
        td code { background: #1a1a2e; color: #00ff88; }
        ul { margin: 1rem 0 1rem 1.5rem; }
        li { margin-bottom: 0.5rem; }
        .note { background: #e8f4fd; border-left: 4px solid #17a2b8; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin: 1rem 0; border-radius: 4px; }
        .video-card { background: linear-gradient(135deg, var(--secondary), #16213e); color: white; padding: 1.5rem; border-radius: 12px; margin: 1rem 0; }
        .video-card a { color: var(--primary); font-weight: 600; }
        footer { background: var(--secondary); color: white; padding: 2rem; text-align: center; margin-top: 4rem; }
        footer a { color: var(--primary); }

        /* MOBILE STYLES */
        @media (max-width: 768px) {
            header { padding: 2.5rem 1rem; }
            header h1 { font-size: 1.75rem; }
            nav .container { flex-direction: column; gap: 0.5rem; text-align: center; }
            .container { padding: 1rem; }
            section { padding: 1.5rem; margin: 1.5rem 0; }
            h2 { font-size: 1.4rem; }
            h3 { font-size: 1.1rem; }
            pre { padding: 1rem; font-size: 0.8rem; overflow-x: auto; -webkit-overflow-scrolling: touch; }
            code { font-size: 0.85rem; word-break: break-word; }
            table { display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; white-space: nowrap; }
            th, td { padding: 0.75rem; font-size: 0.9rem; }
            .video-card { padding: 1rem; }
        }
        a { -webkit-tap-highlight-color: transparent; }
        @supports (padding: max(0px)) {
            .container { padding-left: max(1rem, env(safe-area-inset-left)); padding-right: max(1rem, env(safe-area-inset-right)); }
        }
    </style>
</head>
<body>
    <nav><div class="container"><a href="index.html">üè† Docs Hub</a><div><a href="index.html">Home</a> | <a href="maintenance.html">Maintenance</a></div></div></nav>
    <header><h1>üìñ Architecture Guide</h1><p>Complete walkthrough from bare metal to working media server</p></header>

    <div class="container">
        <section>
            <h2>1. Overview</h2>
            <p>This guide walks through building a complete media server infrastructure on Proxmox VE, from bare metal installation to a fully working Jellyfin, Sonarr, and VPN setup.</p>
            <p><a href="index.html">‚Üê Back to Hub</a></p>
        </section>

        <section>
            <h2>2. Service Locations</h2>
            <table>
                <tr><th>Service</th><th>URL</th><th>Location</th></tr>
                <tr><td>Proxmox</td><td><code>192.168.86.30:8006</code></td><td>Host</td></tr>
                <tr><td>Cockpit</td><td><code>192.168.86.30:9090</code></td><td>Host</td></tr>
                <tr><td>Jellyfin</td><td><code>192.168.86.46:8096</code></td><td>LXC</td></tr>
                <tr><td>Sonarr</td><td><code>192.168.86.30:8989</code></td><td>Host</td></tr>
                <tr><td>qBittorrent</td><td><code>192.168.86.46:8080</code></td><td>LXC</td></tr>
                <tr><td>SAMBA</td><td><code>\\192.168.86.30\media</code></td><td>Host</td></tr>
            </table>
        </section>

        <section>
            <h2>3. Quick Start</h2>
            <h3>Phase 1: Proxmox Host</h3>
            <pre>apt update && apt upgrade -y
apt install -y cockpit zfsutils-linux samba
systemctl enable --now cockpit.socket

# ZFS Pool
zpool create tank /dev/sdb
zfs create tank/media

# SAMBA
cat >> /etc/samba/smb.conf << 'EOF'
[media]
path = /tank/media
browseable = yes
read only = no
guest ok = no
valid users = mediauser
EOF
systemctl restart smbd</pre>

            <h3>Phase 2: LXC Container</h3>
            <pre>pct create 100 ubuntu-22.04.tar.zst --hostname media-stack --memory 4096
pct start 100
pct exec 100 -- bash

# Install Docker
apt update && apt install docker.io docker-compose -y

# Mount ZFS
pct set 100 -mp0 /tank/media,mp=/opt/media-stack/media-shared</pre>

            <h3>Phase 3: Jellyfin</h3>
            <pre>mkdir -p /opt/media-stack/config/jellyfin

cat > /opt/media-stack/docker-compose.yml << 'EOF'
services:
  jellyfin:
    image: jellyfin/jellyfin:latest
    network_mode: host
    volumes:
      - /opt/media-stack/config/jellyfin:/config
      - /opt/media-stack/media-shared:/media
    restart: unless-stopped
EOF

cd /opt/media-stack && docker compose up -d</pre>
        </section>

        <section>
            <h2>4. Video References</h2>
            <div class="video-card">
                <p><a href="https://youtu.be/zLFB6ulC0Fg">Part 1: Hardware Setup</a></p>
            </div>
            <div class="video-card">
                <p><a href="https://youtu.be/Uzqf0qlcQlo">Part 2: Apps & Docker</a></p>
            </div>
        </section>
    </div>

    <footer><p><a href="index.html">‚Üê Back to Hub</a></p></footer>
</body>
</html>
